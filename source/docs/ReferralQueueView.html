<!DOCTYPE html>  <html> <head>   <title>ReferralQueueView.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="IPMActionView.html">                 IPMActionView.coffee               </a>                                           <a class="source" href="IPMChangeSet.html">                 IPMChangeSet.coffee               </a>                                           <a class="source" href="IPMFormValidation.html">                 IPMFormValidation.coffee               </a>                                           <a class="source" href="IPMModule.html">                 IPMModule.coffee               </a>                                           <a class="source" href="IPMView.html">                 IPMView.coffee               </a>                                           <a class="source" href="PolicyModel.html">                 PolicyModel.coffee               </a>                                           <a class="source" href="PolicyModule.html">                 PolicyModule.coffee               </a>                                           <a class="source" href="PolicyView.html">                 PolicyView.coffee               </a>                                           <a class="source" href="ReferralAssigneesModel.html">                 ReferralAssigneesModel.coffee               </a>                                           <a class="source" href="ReferralQueueModule.html">                 ReferralQueueModule.coffee               </a>                                           <a class="source" href="ReferralQueueView.html">                 ReferralQueueView.coffee               </a>                                           <a class="source" href="ReferralTaskCollection.html">                 ReferralTaskCollection.coffee               </a>                                           <a class="source" href="ReferralTaskModel.html">                 ReferralTaskModel.coffee               </a>                                           <a class="source" href="ReferralTaskView.html">                 ReferralTaskView.coffee               </a>                                           <a class="source" href="RenewalUnderwritingModel.html">                 RenewalUnderwritingModel.coffee               </a>                                           <a class="source" href="RenewalUnderwritingView.html">                 RenewalUnderwritingView.coffee               </a>                                           <a class="source" href="SearchContextCollection.html">                 SearchContextCollection.coffee               </a>                                           <a class="source" href="SearchContextModel.html">                 SearchContextModel.coffee               </a>                                           <a class="source" href="SearchContextView.html">                 SearchContextView.coffee               </a>                                           <a class="source" href="SearchModule.html">                 SearchModule.coffee               </a>                                           <a class="source" href="SearchPolicyCollection.html">                 SearchPolicyCollection.coffee               </a>                                           <a class="source" href="SearchPolicyModel.html">                 SearchPolicyModel.coffee               </a>                                           <a class="source" href="SearchPolicyView.html">                 SearchPolicyView.coffee               </a>                                           <a class="source" href="SearchView.html">                 SearchView.coffee               </a>                                           <a class="source" href="ZenDeskView.html">                 ZenDeskView.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               ReferralQueueView.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">define</span> <span class="p">[</span>
  <span class="s">&#39;BaseView&#39;</span><span class="p">,</span>
  <span class="s">&#39;Helpers&#39;</span><span class="p">,</span>
  <span class="s">&#39;Messenger&#39;</span><span class="p">,</span>
  <span class="s">&#39;modules/ReferralQueue/ReferralTaskView&#39;</span><span class="p">,</span>
  <span class="s">&#39;modules/ReferralQueue/ReferralAssigneesModel&#39;</span><span class="p">,</span>
  <span class="s">&#39;text!modules/ReferralQueue/templates/tpl_referral_container.html&#39;</span><span class="p">,</span>
  <span class="s">&#39;text!modules/ReferralQueue/templates/tpl_manage_assignees.html&#39;</span>
<span class="p">],</span> <span class="nf">(BaseView, Helpers, Messenger, ReferralTaskView, ReferralAssigneesModel, tpl_container, tpl_menu_assignees) -&gt;</span>

  <span class="nv">ReferralQueueView = </span><span class="nx">BaseView</span><span class="p">.</span><span class="nx">extend</span>

    <span class="nv">PAGINATION_EL : </span><span class="p">{}</span> <span class="c1"># Pagination form elements</span>
    <span class="nv">SORT_CACHE    : </span><span class="p">{}</span> <span class="c1"># Which column is sorted and direction</span>
    <span class="nv">OWNER_STATE   : </span><span class="s">&#39;&#39;</span> <span class="c1"># Used for &#39;My Referrals&#39; switch</span>

    <span class="nv">events :</span>
      <span class="s">&quot;change .referrals-pagination-page&quot;</span> <span class="o">:</span> <span class="o">-&gt;</span> 
        <span class="nx">@paginateTasks</span><span class="p">(</span><span class="nx">@COLLECTION</span><span class="p">,</span> <span class="nx">@PAGINATION_EL</span><span class="p">)</span>
      <span class="s">&quot;change .referrals-pagination-perpage&quot;</span> <span class="o">:</span> <span class="o">-&gt;</span> 
        <span class="nx">@paginateTasks</span><span class="p">(</span><span class="nx">@COLLECTION</span><span class="p">,</span> <span class="nx">@PAGINATION_EL</span><span class="p">)</span>
      <span class="s">&quot;click .referrals-sort-link&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@sortTasks</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">@COLLECTION</span><span class="p">)</span>
      <span class="s">&quot;click .referrals-switch li&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@toggleOwner</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">@COLLECTION</span><span class="p">,</span> <span class="nx">@PAGINATION_EL</span><span class="p">)</span>
      <span class="s">&quot;click .button-manage-assignees&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@toggleManageAssignees</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
      <span class="s">&quot;click .menu-confirm&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@saveAssignees</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
      <span class="s">&quot;change input[type=checkbox]&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@toggleCheckbox</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
      <span class="s">&quot;click .menu-cancel&quot;</span> <span class="o">:</span> <span class="nf">(e) -&gt;</span>
        <span class="nx">@clearAssignees</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>

    <span class="nv">initialize : </span><span class="nf">(options) -&gt;</span>
      <span class="vi">@MODULE      = </span><span class="nx">options</span><span class="p">.</span><span class="nx">module</span> <span class="o">||</span> <span class="kc">false</span>
      <span class="vi">@COLLECTION  = </span><span class="nx">options</span><span class="p">.</span><span class="nx">collection</span> <span class="o">||</span> <span class="kc">false</span>
      <span class="vi">@PARENT_VIEW = </span><span class="nx">options</span><span class="p">.</span><span class="nx">view</span> <span class="o">||</span> <span class="kc">false</span>
      
      <span class="nv">ixlibrary    = </span><span class="nx">options</span><span class="p">.</span><span class="nx">ixlibrary</span> <span class="o">||</span> <span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>When the collection is populated, generate the views</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@COLLECTION</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s">&#39;reset&#39;</span><span class="p">,</span> <span class="nx">@renderTasks</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="nx">@COLLECTION</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s">&#39;error&#39;</span><span class="p">,</span> <span class="nx">@tasksError</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Setup our DOM hooks</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@el  = </span><span class="nx">@PARENT_VIEW</span><span class="p">.</span><span class="nx">el</span>
      <span class="vi">@$el = </span><span class="nx">@PARENT_VIEW</span><span class="p">.</span><span class="nx">$el</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Create an AssigneeList model to manage the XML list</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">@MODULE</span> <span class="o">!=</span> <span class="kc">false</span>
        <span class="nv">digest    = </span><span class="nx">@MODULE</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">get</span> <span class="s">&#39;digest&#39;</span>
        <span class="nv">ixlibrary = </span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">@MODULE</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">services</span><span class="p">.</span><span class="nx">ixlibrary</span><span class="si">}</span><span class="s">buckets/underwriting/objects/assignee_list.xml&quot;</span>

      <span class="vi">@AssigneeList     = </span><span class="k">new</span> <span class="nx">ReferralAssigneesModel</span><span class="p">({</span> <span class="nv">digest : </span><span class="nx">digest</span> <span class="p">})</span>
      <span class="vi">@AssigneeList.url = </span><span class="nx">ixlibrary</span>
      <span class="nv">errorCallback     = </span><span class="nx">_</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">@renderAssigneesError</span><span class="p">,</span> <span class="k">this</span>
      <span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">fetch</span>
        <span class="nv">error : </span><span class="nx">errorCallback</span>

      <span class="nx">@AssigneeList</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@assigneeSuccess</span><span class="p">,</span> <span class="k">this</span> 
      <span class="nx">@AssigneeList</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;fail&#39;</span><span class="p">,</span> <span class="nx">@assigneeError</span><span class="p">,</span> <span class="k">this</span> 

    <span class="nv">render : </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Setup flash module &amp; main container</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">html = </span><span class="nx">@Mustache</span><span class="p">.</span><span class="nx">render</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#tpl-flash-message&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(),</span> <span class="p">{</span> <span class="nv">cid : </span><span class="nx">@cid</span> <span class="p">}</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="nx">@Mustache</span><span class="p">.</span><span class="nx">render</span> <span class="nx">tpl_container</span><span class="p">,</span> <span class="p">{</span> <span class="nv">cid : </span><span class="nx">@cid</span><span class="p">,</span> <span class="nv">pagination: </span><span class="p">{}</span> <span class="p">}</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">html</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Setup Flash Messenger</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@messenger = </span><span class="k">new</span> <span class="nx">Messenger</span><span class="p">(</span><span class="nx">@PARENT_VIEW</span><span class="p">,</span> <span class="nx">@cid</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Find the container to load rows into</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@CONTAINER = </span><span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;table.module-referrals tbody&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Cache form elements for speedy access</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@PAGINATION_EL = </span><span class="nx">@cachePaginationElements</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Throw up our loading image until the tasks come in</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@toggleLoader</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>If we couldn't load assignee_list.xml then disable the button</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">@ASSIGNEE_STATE</span> <span class="o">==</span> <span class="kc">false</span>
        <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.button-manage-assignees&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

      <span class="k">this</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><strong>Render tasks</strong> <br />
Map the collection models into an array of ReferralTaskViews that we
can use to populate the overall view with task rows.</p>

<p>@param <code>collection</code> <em>Object</em> ReferralTaskCollection <br />
@return <em>Array</em>  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">renderTasks : </span><span class="nf">(collection) -&gt;</span>
      <span class="vi">@TASK_VIEWS = </span><span class="nx">collection</span><span class="p">.</span><span class="nx">map</span> <span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="o">=&gt;</span> 
        <span class="k">new</span> <span class="nx">ReferralTaskView</span><span class="p">(</span>
            <span class="nv">model       : </span><span class="nx">model</span><span class="p">,</span>
            <span class="nv">parent_view : </span><span class="k">this</span>
          <span class="p">)</span>

      <span class="nx">@CONTAINER</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

      <span class="k">for</span> <span class="nx">task</span> <span class="k">in</span> <span class="nx">@TASK_VIEWS</span>
        <span class="nx">@CONTAINER</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="nx">render</span><span class="p">())</span>

      <span class="nx">@toggleLoader</span><span class="p">()</span>
      <span class="nx">@updatePagination</span><span class="p">(</span><span class="nx">collection</span><span class="p">,</span> <span class="nx">@PAGINATION_EL</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Handle server errors from the Tasks Collection</p>

<p>@param <code>collection</code> <em>Object</em> ReferralTaskCollection <br />
@param <code>response</code> <em>jqXHR</em> Response object  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">tasksError : </span><span class="nf">(collection, response) -&gt;</span>
      <span class="nx">@toggleLoader</span><span class="p">()</span>
      <span class="nx">@Amplify</span><span class="p">.</span><span class="nx">publish</span> <span class="nx">@cid</span><span class="p">,</span> <span class="s">&#39;warning&#39;</span><span class="p">,</span> <span class="s">&quot;Could not load referrals: </span><span class="si">#{</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="s"> - </span><span class="si">#{</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="s">&quot;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="p">[</span><span class="s">&quot;tasksError&quot;</span><span class="p">,</span> <span class="nx">collection</span><span class="p">,</span> <span class="nx">response</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Toggle the owner field on the UI and trigger collection.getReferrals()</p>

<p>@param <code>e</code> <em>Event</em>
@param <code>collection</code> <em>Object</em> ReferralTaskCollection <br />
@param <code>elements</code> <em>Object</em> Cached jQuery HTML Elements  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">toggleOwner : </span><span class="nf">(e, collection, elements) -&gt;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nv">$el = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>

      <span class="nv">query =</span>
        <span class="nv">perPage : </span><span class="nx">elements</span><span class="p">.</span><span class="nx">per_page</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">||</span> <span class="mi">25</span>
        <span class="nv">page    : </span><span class="nx">elements</span><span class="p">.</span><span class="nx">jump_to</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">||</span> <span class="mi">1</span>

      <span class="k">if</span> <span class="nx">$el</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&#39;active&#39;</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="k">else</span>
        <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.referrals-switch&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;li&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&#39;active&#39;</span><span class="p">)</span>
        <span class="nx">$el</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;active&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nx">$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;allreferrals&#39;</span>
          <span class="nv">query.OwningUnderwriter = </span><span class="vi">@OWNER_STATE = </span> <span class="s">&#39;&#39;</span>
        <span class="k">else</span>
          <span class="vi">@OWNER_STATE = </span><span class="nx">@options</span><span class="p">.</span><span class="nx">owner</span>

        <span class="nx">@toggleLoader</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="nx">collection</span><span class="p">.</span><span class="nx">getReferrals</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Update the collection with values from pagination form</p>

<p>@param <code>collection</code> <em>Object</em> ReferralTaskCollection <br />
@param <code>elements</code> <em>Object</em> jQuery wrapped HTML elements  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">paginateTasks : </span><span class="nf">(collection, elements) -&gt;</span>
      <span class="nv">query =</span>
          <span class="nv">perPage           : </span><span class="nx">elements</span><span class="p">.</span><span class="nx">per_page</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">||</span> <span class="mi">25</span>
          <span class="nv">page              : </span><span class="nx">elements</span><span class="p">.</span><span class="nx">jump_to</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">||</span> <span class="mi">1</span>
          <span class="nv">OwningUnderwriter : </span><span class="nx">@OWNER_STATE</span>

      <span class="nx">@toggleLoader</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
      <span class="nx">collection</span><span class="p">.</span><span class="nx">getReferrals</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Return an object of pagination form elements <br />
@return <em>Object</em> </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">cachePaginationElements : </span><span class="o">-&gt;</span>
      <span class="nv">items    : </span><span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.pagination-a&#39;</span><span class="p">)</span>
      <span class="nv">jump_to  : </span><span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.referrals-pagination-page&#39;</span><span class="p">)</span>
      <span class="nv">per_page : </span><span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.referrals-pagination-perpage&#39;</span><span class="p">)</span>
 </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Update the pagination controls with current info</p>

<p>@param <code>collection</code> <em>Object</em> ReferralTaskCollection <br />
@param <code>elements</code> <em>Object</em> jQuery wrapped HTML elements  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">updatePagination : </span><span class="nf">(collection, elements) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Items count</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">per_page = </span><span class="nx">elements</span><span class="p">.</span><span class="nx">per_page</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Coerce strings into actual numbers via destructuring</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="p">[</span><span class="nx">per_page</span><span class="p">,</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span><span class="p">,</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">([</span><span class="nx">per_page</span><span class="p">,</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span><span class="p">,</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">page</span><span class="p">],</span> <span class="nf">(num) -&gt;</span>
          <span class="nb">parseInt</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="p">)</span>

      <span class="k">if</span> <span class="nx">per_page</span> <span class="o">&gt;</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span>
        <span class="nv">end_position   = </span><span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span>
        <span class="nv">start_position = </span><span class="mi">1</span>
      <span class="k">else</span>
        <span class="nv">end_position   = </span><span class="nx">collection</span><span class="p">.</span><span class="nx">page</span> <span class="o">*</span> <span class="nx">per_page</span>
        <span class="nv">start_position = </span><span class="nx">end_position</span> <span class="o">-</span> <span class="nx">per_page</span>

      <span class="nv">start_position = </span><span class="k">if</span> <span class="nx">start_position</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="nx">start_position</span>

      <span class="nx">elements</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;span&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;Items </span><span class="si">#{</span><span class="nx">start_position</span><span class="si">}</span><span class="s"> - </span><span class="si">#{</span><span class="nx">end_position</span><span class="si">}</span><span class="s"> of </span><span class="si">#{</span><span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Jump to pages</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">pages        = </span><span class="nx">_</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">totalItems</span> <span class="o">/</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">per_page</span><span class="p">.</span><span class="nx">val</span><span class="p">()))</span>
      <span class="nv">current_page = </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">collection</span><span class="p">.</span><span class="nx">page</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
      <span class="nv">values       = </span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span> <span class="nx">pages</span><span class="p">,</span> <span class="nf">(page) -&gt;</span>
        <span class="k">if</span> <span class="nx">page</span> <span class="o">==</span> <span class="nx">current_page</span>
          <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;option value=\&quot;</span><span class="si">#{</span><span class="nx">page</span><span class="si">}</span><span class="s">\&quot; selected&gt;</span><span class="si">#{</span><span class="nx">page</span><span class="si">}</span><span class="s">&lt;/option&gt;&quot;</span><span class="p">)</span>
        <span class="k">else</span>
          <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;option value=\&quot;</span><span class="si">#{</span><span class="nx">page</span><span class="si">}</span><span class="s">\&quot;&gt;</span><span class="si">#{</span><span class="nx">page</span><span class="si">}</span><span class="s">&lt;/option&gt;&quot;</span><span class="p">)</span>
      <span class="nx">elements</span><span class="p">.</span><span class="nx">jump_to</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Place a loading animation on top of the content</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">toggleLoader : </span><span class="nf">(bool) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>If this is empty we're probably testing</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">referrals-spinner-</span><span class="si">#{</span><span class="nx">@cid</span><span class="si">}</span><span class="s">&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">false</span>

      <span class="k">if</span> <span class="nx">bool</span> <span class="o">and</span> <span class="o">!</span><span class="nx">@loader</span><span class="o">?</span>
        <span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;html&#39;</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&#39;lt-ie9&#39;</span><span class="p">)</span> <span class="o">is</span> <span class="kc">false</span>
          <span class="vi">@loader = </span><span class="nx">Helpers</span><span class="p">.</span><span class="nx">loader</span><span class="p">(</span><span class="s">&quot;referrals-spinner-</span><span class="si">#{</span><span class="nx">@cid</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s">&#39;#ffffff&#39;</span><span class="p">)</span>
          <span class="nx">@loader</span><span class="p">.</span><span class="nx">setDensity</span><span class="p">(</span><span class="mi">70</span><span class="p">)</span>
          <span class="nx">@loader</span><span class="p">.</span><span class="nx">setFPS</span><span class="p">(</span><span class="mi">48</span><span class="p">)</span>
        <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">referrals-loader-</span><span class="si">#{</span><span class="nx">@cid</span><span class="si">}</span><span class="s">&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
      <span class="k">else</span>
        <span class="k">if</span> <span class="nx">@loader</span><span class="o">?</span> <span class="o">and</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;html&#39;</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&#39;lt-ie9&#39;</span><span class="p">)</span> <span class="o">is</span> <span class="kc">false</span>
          <span class="nx">@loader</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span>
          <span class="vi">@loader = </span><span class="kc">null</span>
        <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">referrals-loader-</span><span class="si">#{</span><span class="nx">@cid</span><span class="si">}</span><span class="s">&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Sort the current page of tasks in memory.</p>

<p>@param <code>e</code> <em>Event</em> Click event 
@param <code>collection</code> <em>Object</em> ReferralTaskCollection   </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">sortTasks : </span><span class="nf">(e, collection) -&gt;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nv">$el = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>

      <span class="vi">@SORT_CACHE =</span>
        <span class="s">&#39;sort&#39;</span>    <span class="o">:</span> <span class="nx">$el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)</span>
        <span class="s">&#39;sortdir&#39;</span> <span class="o">:</span> <span class="nx">$el</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;dir&#39;</span><span class="p">)</span>

      <span class="nx">@remove_indicators</span><span class="p">()</span> <span class="c1"># clear the decks!</span>

      <span class="nx">collection</span><span class="p">.</span><span class="nx">sortTasks</span><span class="p">(</span><span class="nx">@SORT_CACHE</span><span class="p">.</span><span class="nx">sort</span><span class="p">,</span> <span class="nx">@SORT_CACHE</span><span class="p">.</span><span class="nx">sortdir</span><span class="p">)</span>

      <span class="k">if</span> <span class="nx">$el</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;dir&#39;</span><span class="p">)</span> <span class="o">is</span> <span class="s">&#39;asc&#39;</span>
        <span class="nx">$el</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;dir&#39;</span><span class="p">,</span> <span class="s">&#39;desc&#39;</span><span class="p">)</span>
        <span class="nx">@swap_indicator</span> <span class="nx">$el</span><span class="p">,</span> <span class="s">&#39;&amp;#9660;&#39;</span>
      <span class="k">else</span>
        <span class="nx">$el</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;dir&#39;</span><span class="p">,</span> <span class="s">&#39;asc&#39;</span><span class="p">)</span>
        <span class="nx">@swap_indicator</span> <span class="nx">$el</span><span class="p">,</span> <span class="s">&#39;&amp;#9650;&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Switch sorting indicator symbol  </p>

<p>@param <code>el</code> <em>HTML Element</em> table header <br />
@param <code>char</code> <em>String</em> direction indicator  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">swap_indicator : </span><span class="nf">(el, char) -&gt;</span>
      <span class="nv">text = </span><span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
      <span class="nv">reg = </span><span class="sr">/▲|▼/gi</span>
      <span class="k">if</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s">&#39;▲&#39;</span><span class="p">)</span> <span class="o">or</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s">&#39;▼&#39;</span><span class="p">)</span>
        <span class="nv">text = </span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">reg</span><span class="p">,</span> <span class="nx">char</span><span class="p">)</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">text</span> <span class="o">+</span> <span class="s">&quot; </span><span class="si">#{</span><span class="nx">char</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>clear all sorting indicators</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">remove_indicators : </span><span class="o">-&gt;</span>
      <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.referrals-sort-link&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="nf">(index, el) -&gt;</span>
        <span class="nv">el = </span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span>
        <span class="nv">reg = </span><span class="sr">/▲|▼/gi</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">reg</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>JSON data from AssigneeList needs some additional parsing to render
correctly in Mustache</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">toggleManageAssignees : </span><span class="nf">(e) -&gt;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&#39;json&#39;</span><span class="p">)</span><span class="o">?</span>
        <span class="nv">assignees = </span><span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">parseBooleans</span><span class="p">(</span><span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&#39;json&#39;</span><span class="p">).</span><span class="nx">Assignee</span><span class="p">)</span>
        <span class="nx">@Modal</span><span class="p">.</span><span class="nx">attach_menu</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">),</span> <span class="s">&#39;.rq-menus&#39;</span><span class="p">,</span> <span class="nx">tpl_menu_assignees</span><span class="p">,</span> <span class="p">{</span><span class="nv">assignees : </span><span class="nx">assignees</span><span class="p">}</span>
      <span class="k">else</span>
        <span class="nx">@Amplify</span><span class="p">.</span><span class="nx">publish</span> <span class="nx">@cid</span><span class="p">,</span> <span class="s">&#39;warning&#39;</span><span class="p">,</span> <span class="s">&quot;Unable to load assignees from server.&quot;</span>

    <span class="nv">renderAssigneesError : </span><span class="nf">(model, xhr, options) -&gt;</span>
      <span class="vi">@ASSIGNEE_STATE = </span><span class="kc">false</span>
      <span class="nx">@Amplify</span><span class="p">.</span><span class="nx">publish</span> <span class="s">&#39;controller&#39;</span><span class="p">,</span> <span class="s">&#39;warning&#39;</span><span class="p">,</span> <span class="s">&quot;Warning - could not load assignees xml: </span><span class="si">#{</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="s"> - </span><span class="si">#{</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="s">&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>The two lists of checkboxes are combined into one array of objects. Then
map over the Assignee JSON from the model, plucking objects from our
combined array with the same identity and merging in their new values.
The updated Assignee JSON is set back to the model, which generates XML
and PUTs it back to the server.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">saveAssignees : </span><span class="nf">(e) -&gt;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nx">@assigneeLoader</span><span class="p">()</span>
      <span class="nv">values = </span><span class="p">[]</span>
      <span class="nv">json   = </span><span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&#39;json&#39;</span><span class="p">).</span><span class="nx">Assignee</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Combine lists into array with some processing on identity</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;input[type=checkbox]&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="nf">(index, val) -&gt;</span>
        <span class="nv">name = </span><span class="nx">$</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&#39;newbiz_&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span>
          <span class="nx">values</span><span class="p">.</span><span class="nx">push</span>
            <span class="nv">identity     : </span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span> <span class="sr">/newbiz_/gi</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
            <span class="nv">new_business : </span><span class="nx">$</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="k">else</span>
          <span class="nx">values</span><span class="p">.</span><span class="nx">push</span>
            <span class="nv">identity : </span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span> <span class="sr">/renewal_/gi</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
            <span class="nv">renewals : </span><span class="nx">$</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>

      <span class="nv">merged = </span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span> <span class="nx">json</span><span class="p">,</span> <span class="nf">(assignee) -&gt;</span>
        <span class="nv">items = </span><span class="nx">_</span><span class="p">.</span><span class="nx">where</span> <span class="nx">values</span><span class="p">,</span> <span class="p">{</span> <span class="nv">identity : </span><span class="nx">assignee</span><span class="p">.</span><span class="nx">identity</span> <span class="p">}</span>
        <span class="k">if</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span>
          <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">assignee</span><span class="p">,</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span>
          <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">assignee</span><span class="p">,</span> <span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

      <span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">set</span> <span class="s">&#39;json&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nv">Assignee : </span><span class="nx">merged</span> <span class="p">}</span>
      <span class="nx">@AssigneeList</span><span class="p">.</span><span class="nx">putList</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Remove the menu from DOM so it will be generated fresh erasing any
changes from the user</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">clearAssignees : </span><span class="nf">(e) -&gt;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nx">@Modal</span><span class="p">.</span><span class="nx">removeMenu</span><span class="p">()</span>

    <span class="nv">assigneeLoader : </span><span class="o">-&gt;</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.menu-status&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
          <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&#39;&lt;strong class=&quot;menu-loading&quot;&gt;Saving changes&amp;hellip;&lt;/strong&gt;&#39;</span><span class="p">)</span>   

    <span class="nv">assigneeSuccess : </span><span class="nf">(model) -&gt;</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.menu-status&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
          <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&#39;&lt;strong class=&quot;menu-success&quot;&gt;Assignee List saved!&lt;/strong&gt;&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="s">&#39;slow&#39;</span><span class="p">)</span>

    <span class="nv">assigneeError : </span><span class="nf">(msg) -&gt;</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;.menu-status&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
          <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;&quot;&quot;&lt;strong class=&quot;menu-error&quot;&gt;Error saving: </span><span class="si">#{</span><span class="nx">msg</span><span class="si">}</span><span class="s">&lt;/strong&gt;&quot;&quot;&quot;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="s">&#39;slow&#39;</span><span class="p">)</span>

    <span class="nv">toggleCheckbox : </span><span class="nf">(e) -&gt;</span>
      <span class="nv">$cb = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">$cb</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;checked&#39;</span><span class="p">)</span>
        <span class="nx">$cb</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="nx">$cb</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s">&#39;false&#39;</span><span class="p">)</span>
      <span class="nx">$cb</span>
  

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 