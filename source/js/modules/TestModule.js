// Generated by CoffeeScript 1.3.3
(function() {

  define(['jquery', 'underscore', 'backbone', 'mustache', 'amplify_core', 'amplify_store'], function($, _, Backbone, Mustache, amplify) {
    var TestModule;
    return TestModule = (function() {

      function TestModule(view, app, params) {
        this.view = view;
        this.app = app;
        this.params = params;
        this.load();
      }

      TestModule.prototype.load = function() {
        var rnd,
          _this = this;
        rnd = Math.floor(Math.random() * (4 - 1 + 1)) + 1;
        return this.callback_delay(rnd * 1000, function() {
          return _this.view.remove_loader();
        });
      };

      TestModule.prototype.render = function() {
        var tpl,
          _this = this;
        tpl = "<h2>{{label}} Module is rendered</h2>\n<p>Hell open to christians they were having, Jimmy Henry said pettishly, about their damned Irish language. Where was the marshal, he wanted to know, to keep order in the council chamber. And old Barlow the macebearer laid up with asthma, no mace on the table, nothing in order, no quorum even, and Hutchinson, the lord mayor, in Llandudno and little Lorcan Sherlock doing locum tenens for him. Damned Irish language, language of our forefathers.</p>";
        this.view.$el.html(Mustache.render(tpl, {
          label: this.app.app_label
        }));
        return $('.open_search_app').on('click', function(e) {
          var $e, app, data;
          e.preventDefault();
          $e = $(e.target);
          data = $e.data();
          app = {
            app: "policy_view_" + data.pcPolicy,
            app_label: "Policy view " + data.pcPolicy,
            params: data
          };
          return _this.view.launch_child_app(app);
        });
      };

      TestModule.prototype.callback_delay = function(ms, func) {
        return setTimeout(func, ms);
      };

      return TestModule;

    })();
  });

}).call(this);
