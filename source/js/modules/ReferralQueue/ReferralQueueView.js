// Generated by CoffeeScript 1.3.3
(function() {

  define(['BaseView', 'Helpers', 'Messenger', 'modules/ReferralQueue/ReferralTaskView', 'text!modules/ReferralQueue/templates/tpl_referral_container.html'], function(BaseView, Helpers, Messenger, ReferralTaskView, tpl_container) {
    var ReferralQueueView;
    return ReferralQueueView = BaseView.extend({
      initialize: function(options) {
        this.MODULE = options.module || false;
        this.COLLECTION = options.collection || false;
        this.PARENT_VIEW = options.view || false;
        this.COLLECTION.bind('reset', this.renderTasks, this);
        this.el = this.PARENT_VIEW.el;
        return this.$el = this.PARENT_VIEW.$el;
      },
      render: function() {
        var html;
        html = this.Mustache.render($('#tpl-flash-message').html(), {
          cid: this.cid
        });
        html += this.Mustache.render(tpl_container, {
          cid: this.cid,
          pagination: {}
        });
        this.$el.html(html);
        this.CONTAINER = this.$el.find("#module-referrals-" + this.cid + " .module-referrals tbody");
        return this;
      },
      renderTasks: function(collection) {
        var _this = this;
        return this.TASK_VIEWS = collection.map(function(model) {
          return new ReferralTaskView({
            model: model,
            parent_view: _this
          });
        });
      }
    });
  });

}).call(this);
