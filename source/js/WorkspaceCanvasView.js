// Generated by CoffeeScript 1.3.3
(function() {

  define(['BaseView', 'mustache'], function(BaseView, mustache) {
    var WorkspaceCanvasView;
    return WorkspaceCanvasView = BaseView.extend({
      $target: $('#target'),
      tagName: 'section',
      className: 'canvas',
      tab: null,
      initialize: function(options) {
        this.$tab_el = options.controller.$workspace_tabs;
        if (options.template != null) {
          this.template = options.template;
        }
        if (options.template_tab != null) {
          this.template_tab = options.template_tab;
        }
        if (!(options.app != null)) {
          return this.Amplify.publish('flash', 'warning', 'There was a problem locating that workspace.');
        }
        this.app = options.app;
        this.el.id = this.app.app;
        return this.options.controller.trigger('stack_add', this);
      },
      render: function() {
        this.$target.append(this.$el.html(this.template.html()));
        return this.render_tab(this.template_tab);
      },
      render_tab: function(template) {
        this.tab = Mustache.render(template, {
          tab_class: ' class="selected"',
          tab_url: '#login',
          tab_label: 'Login'
        });
        return this.$tab_el.append(this.tab);
      },
      destroy: function() {
        if (this.$tab != null) {
          delete this.tab;
        }
        this.$el.html('');
        return this.options.controller.trigger('stack_remove', this);
      }
    });
  });

}).call(this);
