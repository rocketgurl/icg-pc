/*! Amplify Store v1.1.0 - http://amplifyjs.com
 * Copyright (c) 2012 appendTo LLC (http://appendto.com/team)
 * Licensed MIT, GPL http://appendto.com/open-source-licenses */
(function(a,b,c){typeof define=="function"&&define.amd?define(["jquery"],function(d){return c(d,a,b)}):c(a.jQuery,a,b)})(this,document,function(a,b,c,d){return function(a,b){function f(a,c){d.addType(a,function(f,g,h){var i,j,k,l,m=g,n=(new Date).getTime();if(!f){m={},l=[],k=0;try{f=c.length;while(f=c.key(k++))e.test(f)&&(j=JSON.parse(c.getItem(f)),j.expires&&j.expires<=n?l.push(f):m[f.replace(e,"")]=j.data);while(f=l.pop())c.removeItem(f)}catch(o){}return m}f="__amplify__"+f;if(g===b){i=c.getItem(f),j=i?JSON.parse(i):{expires:-1};if(j.expires&&j.expires<=n)c.removeItem(f);else return j.data}else if(g===null)c.removeItem(f);else{j=JSON.stringify({data:g,expires:h.expires?n+h.expires:null});try{c.setItem(f,j)}catch(o){d[a]();try{c.setItem(f,j)}catch(o){throw d.error()}}}return m})}var d=a.store=function(a,b,c){var e=d.type;return c&&c.type&&c.type in d.types&&(e=c.type),d.types[e](a,b,c||{})};d.types={},d.type=null,d.addType=function(a,b){d.type||(d.type=a),d.types[a]=b,d[a]=function(b,c,e){return e=e||{},e.type=a,d(b,c,e)}},d.error=function(){return"amplify.store quota exceeded"};var e=/^__amplify__/;for(var g in{localStorage:1,sessionStorage:1})try{window[g].setItem("__amplify__","x"),window[g].removeItem("__amplify__"),f(g,window[g])}catch(h){}if(!d.types.localStorage&&window.globalStorage)try{f("globalStorage",window.globalStorage[window.location.hostname]),d.type==="sessionStorage"&&(d.type="globalStorage")}catch(h){}(function(){if(d.types.localStorage)return;var a=c.createElement("div"),e="amplify";a.style.display="none",c.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load(e)}catch(f){a.parentNode.removeChild(a);return}d.addType("userData",function(c,f,g){a.load(e);var h,i,j,k,l,m=f,n=(new Date).getTime();if(!c){m={},l=[],k=0;while(h=a.XMLDocument.documentElement.attributes[k++])i=JSON.parse(h.value),i.expires&&i.expires<=n?l.push(h.name):m[h.name]=i.data;while(c=l.pop())a.removeAttribute(c);return a.save(e),m}c=c.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),c=c.replace(/^-/,"_-");if(f===b){h=a.getAttribute(c),i=h?JSON.parse(h):{expires:-1};if(i.expires&&i.expires<=n)a.removeAttribute(c);else return i.data}else f===null?a.removeAttribute(c):(j=a.getAttribute(c),i=JSON.stringify({data:f,expires:g.expires?n+g.expires:null}),a.setAttribute(c,i));try{a.save(e)}catch(o){j===null?a.removeAttribute(c):a.setAttribute(c,j),d.userData();try{a.setAttribute(c,i),a.save(e)}catch(o){throw j===null?a.removeAttribute(c):a.setAttribute(c,j),d.error()}}return m})})(),function(){function e(a){return a===b?b:JSON.parse(JSON.stringify(a))}var a={},c={};d.addType("memory",function(d,f,g){return d?f===b?e(a[d]):(c[d]&&(clearTimeout(c[d]),delete c[d]),f===null?(delete a[d],null):(a[d]=f,g.expires&&(c[d]=setTimeout(function(){delete a[d],delete c[d]},g.expires)),f)):e(a)})}()}(this.amplify=this.amplify||{}),amplify});