/*! Amplify Core v1.1.0 - http://amplifyjs.com
 * Copyright (c) 2012 appendTo LLC (http://appendto.com/team)
 * Licensed MIT, GPL http://appendto.com/open-source-licenses */
(function(a,b,c){typeof define=="function"&&define.amd?define(["jquery"],function(d){return c(d,a,b)}):c(a.jQuery,a,b)})(this,document,function(a,b,c,d){return function(a,b){var c=[].slice,d={},e=a.amplify={publish:function(a){if(typeof a!="string")throw new Error("You must provide a valid topic to publish.");var b=c.call(arguments,1),e,f,g,h=0,i;if(!d[a])return!0;e=d[a].slice();for(g=e.length;h<g;h++){f=e[h],i=f.callback.apply(f.context,b);if(i===!1)break}return i!==!1},subscribe:function(a,b,c,e){if(typeof a!="string")throw new Error("You must provide a valid topic to create a subscription.");arguments.length===3&&typeof c=="number"&&(e=c,c=b,b=null),arguments.length===2&&(c=b,b=null),e=e||10;var f=0,g=a.split(/\s/),h=g.length,i;for(;f<h;f++){a=g[f],i=!1,d[a]||(d[a]=[]);var j=d[a].length-1,k={callback:c,context:b,priority:e};for(;j>=0;j--)if(d[a][j].priority<=e){d[a].splice(j+1,0,k),i=!0;break}i||d[a].unshift(k)}return c},unsubscribe:function(a,b){if(typeof a!="string")throw new Error("You must provide a valid topic to remove a subscription.");if(!d[a])return;var c=d[a].length,e=0;for(;e<c;e++)if(d[a][e].callback===b){d[a].splice(e,1);break}}}}(this),amplify});